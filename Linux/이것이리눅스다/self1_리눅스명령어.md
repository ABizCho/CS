## 리눅스 명령어

ubuntu 기반의 서비스 배포 환경을 구축 및 운영해보며, 리눅스 명령어에 더욱 익숙해 질 필요가 있음을 느꼈었다. 대부분은 윈도우와 비슷하거나 어느정도 익숙한 것들이지만, 이번기회에 추가적으로 정리할 것들을 찾아 학습 및 기록해봐야겠다.



### 파일 관리

**cd**: 디렉터리 지정 이동, 상대경로도 가능



**ls**: 디렉터리 및 파일, 파일 정보를 옵션에 따라 다양하게 출력

 - **-l**: **c/ccc/ccc/ccc n user user n(bytes) timstamps**
   - 파일 유형
     - d: dir
     - l : 심볼릭 링크
     - -:  일반 파일
   - 9자리 ccc/ccc/ccc: 소유자/소유자그룹/기타사용자 순 접근권한
     - read, write, execution 을 순서대로 4, 2, 1로 표현하며 이들의 합을 위의 계정순으로 나열하여 접근권한 부여 가능 ex. `chmod 754 filename` 로, filename이란 파일에, 소유자:read+write+exec/소유자그룹:read+exec/기타사용자:read 권한을 부여하는 것 
   - n: 연결된 심볼릭 링크 수 (양방향),
     - `ln -s [원본파일] [대상파일]` : 심볼릭 링크 연결
     - `ln [원본파일] [대상파일]: 하드링크 연결`
 - -a : 디렉터리 내 모든 파일 출력
 - -i : 파일의 inode와 함께 출력 (inode는 리눅스 자료구조 참고: 하드링크 시 원본복제)
 - **-m**: 파일을 쉼표로 구분하여 가로로 출력
 - **-r**: 정렬 옵션이 선택되었을 때, 그 역순으로 출력
 - -s: kb 단위의 파일 크기 출력
 - **-t**: 최근에 만들어진 파일 순서로 출력
 - **-x**: 파일 순서롤 세로로 출력
 - -F: 파일의 형태와 함께 출력
 - -R: 서브 디렉토리의 내용을 포함해 출력
 - -S: 파일의 크기가 큰 순서로 출력
 - -U: 정렬하여 출력
 - -1: 한라인당 한 파일씩 출력

```
# EX. horizd 디렉토리 내용을 최근 생성 순서로 출력

$ ls -t /home/horizd
```



**cp**: 파일을 다른 파일 이름으로 또는 다른 디렉토리로 복사하는 명령어. 도스의 copy와 같음

	- -a , --archive : 가능한 한 원본 파일 구조, 속성 그대로 복사
	- -b, --backup : 덮어쓰거나 지울 때, 백업 파일을 생성
 - -d, --no-deference : 원본이 심볼릭 링크 파일일 시, 심볼릭 링크 파일을 그대로 복사.
   - default는 원본 파일을 복사한다.
 - -f, --force : 동일 파일명 있을 경우, 지운 후 복사
 - -i, --interactive : 동일 파일명 있을 경우, 사용자 확인 후 복사
 - -l, --link : 심볼릭 링크 형식으로 복사
 - --parents: 원본 파일명에 디렉터리 경로도 입력했다면, 그 경로도 그대로 복사
 - -p, preserve: 원본 파일의 소유,그룹,권한,허용시간 까지 복사
 - -r, -R, --recursive : 하위 디렉토리 포함 모든 파일 복사
 - -s, --symbolic-link: 일반 파일은 복사하는 대신 심볼릭 링크로 만든다. (디렉토리는 x)
 - -u, --update: 변경일이 같거나 더 최신의 파일이 있을 경우 복사하지 않는다.
 - -v, --verbose: 복사 상세내역 출력

**mv**: 파일을 다른 파일 또는 디렉토리로 옮길 때 사용. 파일 이름을 바꿀 때도 사용한다.

- -b: 기존 위치에 백업 만들고 이동
- -f : 옮겨질 디렉토리아 존재하는 파일이 있을 시 덮어씀
- -i : 옮겨질 디렉토리에 존재하는 파일이 있을 시 확인받음
- -v : 옮기기 전에 파일명 출력

**rm**: 파일을 지우는 명령어로, 유닉스 하에서는 파일이 지워지면 복구가 불가하다.

- -f : 강제로 파일 삭제
- -i : 파일 지우기 전에 확인
- -r , -R : 서브 디렉토리 파일까지 삭제
- -v : 파일을 지우기 전 파일명 출력



**mkdir** : 디렉토리 새로 만들 때 사용.

- -p : 지정된 모든 서브 디렉토리까지 함께 생성
- -m : mode mode에 해당하는 접근권한으로 디렉토리 생성

**rmdir**: 디렉토리 제거. 디렉토리 내부에 파일이 남아 있을 시 지워지지 않으므로, 디렉토리를 지우기 전 rm명령어로 내부 파일을 모두 지워야 한다.

- -p : 지우고자 하는 디렉토리의 상위 디렉토리까지 포함하여 삭제

**man (manual)** : 주어진 명령이나 유틸리티의 매뉴얼을 출력한다.

- -a : 모든 매뉴얼 페이지 출력
- -d : 디버깅 정보 출력
- -h : 도움말 출력

**cat**: 파일의 모든 내용을 한번에 화면에 나타나게 한다.

**pwd**: 현재 디렉토리 위치 출력

**echo**: 주어진 인자를 단순히 화면에 출력

**grep**: 주어진 패턴을 포함하는 파일의 라인 출력

- -C : 일치하는 문장의 상하 두라인 포함해 출력

- -V : 버전과 함께 출력
- -b : Byte 오프셋과 함께 출력
- -c : 일치하는 라인의 갯수 출력
- -h : 파일명은 출력하지 않음
- -i : 대소문자는 구분하지 않음
- -l : 일치하는 내용을 가지는 파일명만 출력
- -n : 일치하는 내용을 가지는 라인번호 출력
- -s : 에러 메시지만을 출력
- -v : 일치하지 않는 내용 출력
- -w : 한 단어로 일치해야 출력
- -x : 전체 라인이 일치해야 출력

```
ex) rm이라는 이름이 들어간 파일을 ls 중에서 찾기

$ ls grep rm
```



**find**: 디렉토리를 탐색하며, 지정된 조건에 만족하는 파일을 찾는다. 이름, 크기, 날짜, 사용자 등의 조건을 옵션으로 지정할 수 있음.

	- -name : 찾고자 하는 파일의 이름을 지정
	- -perm : 파일의 권한(permission)이 일치하는 것 탐색
	- -user : 사용자의 ID에 따라서 검색
	- -atime : 최근 며칠 내 접속한 파일을 검색
	-  -newer : 최근에 갱신된 모든 파일 검색

```
ex) maria 라는 이름의 파일 탐색

$ find -name maria
```



**mount**: cdrom, 플로피 디스크 사용 설정

**unmount**: 디렉토리와 연결되었던 시디롬, 플로피 디스크를 분리시켜 주는 명령. 다 쓰고 나면 항상 언마운트 시켜줘야 한다.

**리디렉션** : 표준 입력, 표준 출력, 에러 출력 등의 방향을 다른 곳으로 바꾸는 것.

**파이프라인**:  파이프는 여러 명령을 함께 사용할 때, 한 명령의 결과가 다른 명령으로 전송되는 통로임. 명령을 일일이 치지 않고 한꺼번에 처리할 때 편리하게 사용



---

### 사용자 관리

**chgrp**: 파일의 소유자 그룹 변경

- -c : 실제로 소유자가 바뀐 파일에 대해 자세히 설명
- -f : 소유권을 바꿀 수 없어도 에러 메시지를 나타내지 않는다.
- -v : 소유권의 이전에 대해 자세히 기술
- R : 디렉토리와 그 내용 파일들의 소유권을 재귀적으로 모두 바꾼다.

```
파일의 소유자나 슈퍼유저만 파일의 그룹 소유권을 바꿀 수 있으며 아래처럼 가능

chgrp + 옵션 바꾸자 하는 그룹의 이름 + 디렉토리 + 파일명
--------------------------------------------------
ex) /root 그룹의 ak파일을 white라는 그룹으로 소유권 이전

$ chgrp white /root/ak
```



**chmod**: 파일의 모드를 바꿀 때 사용한다. 파일의 모드는 권한을 제어한다.

- -c: 실제로 파일의 권한이 바뀐 파일만 자세히 기술
- -f : 파일의 권한이 바뀔 수 없어도 에러메시지 출력하지 않음
- -v : 변경된 권한에 대해 자세히 출력
- -R ; 디렉토리와 파일들의 권한을 재귀적으로 모두 바꿈

```
소유자/소유자그룹/기타사용자 순서로 세 대상 존재

부여할 권한은 r(read), w(write), x(execute) 세가지
각 단위당 2진법으로 표현한다.

각각 4, 2, 1이며, 모든 권한 부여 시 4+2+1로 7로 표현

ls -l 으로 파일정보 출력 시 가장 처음 보이는 문자열인
c/ccc/ccc/ccc 에서 2~10에 해당하는 문자열 3개씩은 
각각 소유자/소유자그룹/기타사용자의 권한을 나열한다.

---
$ chmod nnn filename

위의 형태로 접근권한 수정 가능
```



**chown**: 파일의 소유권을 다른 사람에게 변경할 때 사용한다. 파일 소유권 수정은 슈퍼 유저만 가능하다.

- -c: 실제로 파일의 소유권이 바뀐 파일만 자세히 기술
- -f : 파일의 소유권이 바뀔 수 없어도 에러메시지 출력하지 않음
- -v : 변경된 소유권에 대해 자세히 기술
- -R : 디렉토리와 파일들의 소유권을 재귀적으로 모두 수정

```
root/ 에 위치한 wow라는 파일을 test라는 소유권 그룹으로 바꿀 때

$ chown test /root/wow
```



---

### 프로세스 관리 명령

시스템 정보에 관한 명령어들이다.

**ps (process)**: 현재 진행중인 프로세스에 대한 정보를 출력

**pstree (process tree)**: ps에 의해서 출력되는 프로세스 정보를 트리 형태로 출력

**top**: cpu와 메모리를 사용하는 작업들에 대한 시스템 정보를 출력. 원래 화면으로 돌아가기 위해 q를 입력

**arch (architecture)**: 현재 사용하고 있는 cpu 모델 출력

**cal (calendar)**: 현재 월 출력. cal과 함께 원하는 월과 연도를 숫자로 입력하면 원하는 달의 달력을 볼 수 있음. -j 옵션은 율리우스 달력.

**clock**: CMOS 설정 시간을 출력 혹은 변경 가능하다.

**date**: 현재 시간, 날짜 출력

**df (disk free)**: 하드의 전체 용량 및 남은 용량 확인 시 사용

- -h (human): 바이트 단위로 출력

**du (disk usage)**: 디렉토리 별, 디스크 점유 용량 출력

**free (free memory)**: 현재 사용중인 시스템의 메모리 상태 출력

​	-m : 메가바이트단위

​	-k : 킬로바이트 단위



......



****